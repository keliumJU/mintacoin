defmodule Mintacoin.Payments.StellarMock do
  @moduledoc """
  Mock implementation of the Stellar crypto functions for payments
  """

  alias Mintacoin.Payments.Crypto.PaymentResponse

  @behaviour Mintacoin.Payments.Crypto.Spec

  @impl true
  def create_payment(_opts) do
    default_status = Enum.random([true, false])

    {:ok,
     %PaymentResponse{
       successful: Application.get_env(:stellar_mock, :tx_status, default_status),
       tx_id: "200dbe2ed52eb76bb850a842494ef47e9b266426e6a8326e9309ec1ed66af3d9",
       tx_hash: "200dbe2ed52eb76bb850a842494ef47e9b266426e6a8326e9309ec1ed66af3d9",
       tx_timestamp: "2022-11-01 20:25:25Z",
       tx_response: %{
         created_at: ~U[2022-11-01 20:25:25Z],
         envelope_xdr:
           "AAAAAgAAAAD9kjAIDaLyHiiHhCcZLQkl198WmMDG25JF6fAm/fLBhAAAAGQACusxAAAACwAAAAAAAAAAAAAAAQAAAAEAAAAAZFADJ3T/4GcIzeNSPAkiEc+naJMKwI0IeCW1xY/RCBcAAAABAAAAALetC37fUbxLN9FDugu7GVgStWsSENFzB9N/RdcPycEqAAAAAVpaWgAAAAAA/ZIwCA2i8h4oh4QnGS0JJdffFpjAxtuSRenwJv3ywYQAAAAAC+vCAAAAAAAAAAAC/fLBhAAAAEByWwVgrO7MYaCRhiNbyDuTHMRWLcsVOIXTGMFNkR1U7TBknswvKzbkLLSJFU6MsNWfTZSFfRevg5UgjybSntAGj9EIFwAAAEA2BdAC5HbN8y2+yHBF7m76uy59SHOoVwIWkek6syosiJZTw6LdPJfLwPBRmh7jtnDDGkuTVKbXkTnFN/b8x84E",
         fee_charged: 100,
         fee_meta_xdr:
           "AAAAAgAAAAMAC+p9AAAAAAAAAAD9kjAIDaLyHiiHhCcZLQkl198WmMDG25JF6fAm/fLBhAAAABF0j2XQAArrMQAAAAoAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAADAAAAAAAL6n0AAAAAY2A6NgAAAAAAAAABAAwouwAAAAAAAAAA/ZIwCA2i8h4oh4QnGS0JJdffFpjAxtuSRenwJv3ywYQAAAARdI9lbAAK6zEAAAAKAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAC+p9AAAAAGNgOjYAAAAA",
         hash: "200dbe2ed52eb76bb850a842494ef47e9b266426e6a8326e9309ec1ed66af3d9",
         id: "200dbe2ed52eb76bb850a842494ef47e9b266426e6a8326e9309ec1ed66af3d9",
         ledger: 796_859,
         max_fee: 100,
         memo: nil,
         memo_type: "none",
         operation_count: 1,
         paging_token: "3422483344539648",
         preconditions: nil,
         result_meta_xdr:
           "AAAAAgAAAAIAAAADAAwouwAAAAAAAAAA/ZIwCA2i8h4oh4QnGS0JJdffFpjAxtuSRenwJv3ywYQAAAARdI9lbAAK6zEAAAAKAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAC+p9AAAAAGNgOjYAAAAAAAAAAQAMKLsAAAAAAAAAAP2SMAgNovIeKIeEJxktCSXX3xaYwMbbkkXp8Cb98sGEAAAAEXSPZWwACusxAAAACwAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAMAAAAAAAwouwAAAABjYYC1AAAAAAAAAAEAAAAEAAAAAwAL6Z0AAAABAAAAAGRQAyd0/+BnCM3jUjwJIhHPp2iTCsCNCHgltcWP0QgXAAAAAVpaWgAAAAAA/ZIwCA2i8h4oh4QnGS0JJdffFpjAxtuSRenwJv3ywYQAAAAXSHboAH//////////AAAAAQAAAAAAAAAAAAAAAQAMKLsAAAABAAAAAGRQAyd0/+BnCM3jUjwJIhHPp2iTCsCNCHgltcWP0QgXAAAAAVpaWgAAAAAA/ZIwCA2i8h4oh4QnGS0JJdffFpjAxtuSRenwJv3ywYQAAAAXPIsmAH//////////AAAAAQAAAAAAAAAAAAAAAwAL6cAAAAABAAAAALetC37fUbxLN9FDugu7GVgStWsSENFzB9N/RdcPycEqAAAAAVpaWgAAAAAA/ZIwCA2i8h4oh4QnGS0JJdffFpjAxtuSRenwJv3ywYQAAAAAAAAAAH//////////AAAAAQAAAAAAAAAAAAAAAQAMKLsAAAABAAAAALetC37fUbxLN9FDugu7GVgStWsSENFzB9N/RdcPycEqAAAAAVpaWgAAAAAA/ZIwCA2i8h4oh4QnGS0JJdffFpjAxtuSRenwJv3ywYQAAAAAC+vCAH//////////AAAAAQAAAAAAAAAAAAAAAA==",
         result_xdr: "AAAAAAAAAGQAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAA=",
         signatures: [
           "clsFYKzuzGGgkYYjW8g7kxzEVi3LFTiF0xjBTZEdVO0wZJ7MLys25Cy0iRVOjLDVn02UhX0Xr4OVII8m0p7QBg==",
           "NgXQAuR2zfMtvshwRe5u+rsufUhzqFcCFpHpOrMqLIiWU8Oi3TyXy8DwUZoe47ZwwxpLk1Sm15E5xTf2/MfOBA=="
         ],
         source_account: "GD6ZEMAIBWRPEHRIQ6CCOGJNBES5PXYWTDAMNW4SIXU7AJX56LAYI377",
         source_account_sequence: 3_073_345_453_031_435,
         successful: true,
         valid_after: nil,
         valid_before: nil
       }
     }}
  end
end
